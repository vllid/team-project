@startuml "erd"

entity "Навыки" as skills
{
    ID_Навык : int <<PK>>
    Название : nvarchar(20)
}

entity "Каталог навыков специалиста" as skills_cat
{
    ID_Кат_нав : int <<PK>>
    ID_Навык : int <<FK>>
    ID_Пользователь : int <<FK>>
}

entity "Специализации" as spec_enum
{
    ID_Специализация : int <<PK>>
    Название : nvarchar(30)
}

entity "Каталог специализаций специалиста" as spec_cat
{
    ID_Кат_специализаций_специалистов : int <<PK>>
    ID_Навык : int <<FK>>
    ID_Пользователь : int <<FK>>
}

'entity "Отзывы" as appl
' {
'     ID_Отзыв : int <<PK>>
'     ID_Пользователя nvarchar(50) <<FK>>
'     Оценка : float 
'     Комментарий : nvarchar(250)
' }


entity "Платформы" as platf 
{
    ID_Платформа : int <<PK>>
    Название : nvarchar(30)
}

entity "Страна" as countries 
{
    ID_Страна : int <<PK>>
    Название : nvarchar(50)
}

entity "Город" as cities 
{
    ID_Город : int <<PK>>
    ID_Страна : int <<FK>>
    Название : nvarchar(50)
}

entity "Роль" as role 
{
    ID_Роль: int <<PK>>
    Наименование: nvarchar(40)
}

entity "Пользователь" as users 
{
    ID_Пользователь : int <<PK>>
    * ID_Страна : int <<FK>>
    * ID_Город : int <<FK>>
    * email : nvarchar(30)
    * Пароль : nvarchar(30)
    * Имя : nvarchar(20)
    * Фамилия : nvarchar(20)
    * Отчество : nvarchar(20)
    * Дата рождения : datetime 
    * О себе : nvarchar(250)
    ID_Специализация : int <<FK>>
    Портфорлио : nvarchar(400)
    ID_Роль : int <<FK>>
}

enum "Заявка" as request 
{
    ID_Заявка : int <<PK>>
    ID_Заказчик : int <<FK>>
    ID_Специалист : int <<FK>>
    Время связи : datatime 
    ID_Статус_заявки : int <<FK>>
    ID_Платформа : int <<FK>>
    Оценка_заказчика : float 
    Комментарий_заказчика : nvarchar(250)
    Оценка_специалиста : float 
    Комментарий_специалиста : nvarchar(250)
}

users ||--o{ request
platf ||--o{ request

skills_cat }o--|| users : имеет
skills_cat }o--|| skills

spec_cat }o--|| users : имеет
spec_cat }o--|| spec_enum

users }o--|| cities
countries ||--|{ cities

users }o--o| role

'request ||--|| appl 


@enduml